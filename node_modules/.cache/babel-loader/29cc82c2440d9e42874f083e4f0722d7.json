{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport { projectFirestore } from \"../firebase/config\";\nexport const useCollection = (collection, _query, _orderBy) => {\n  _s();\n  const [documents, setDocuments] = useState(null);\n  const [error, setError] = useState(null);\n\n  // if we don't use a ref --> infinite loop in useEffect\n  // _query is an array and is \"different\" on every function call\n  const query = useRef(_query).current;\n  const orderBy = useRef(_orderBy).current;\n  useEffect(() => {\n    let ref = projectFirestore.collection(collection);\n    if (query) {\n      ref = ref.where(...query);\n    }\n    if (orderBy) {\n      ref = ref.orderBy(...orderBy);\n    }\n    const unsubscribe = ref.onSnapshot(snapshot => {\n      let results = [];\n      snapshot.docs.forEach(doc => {\n        console.log(doc);\n        results.push({\n          ...doc.data(),\n          id: doc.id\n        });\n      });\n\n      // update state\n      setDocuments(results);\n      setError(null);\n    }, error => {\n      console.log(error);\n      setError(\"could not fetch the data\");\n    });\n\n    // unsubscribe on unmount\n    return () => unsubscribe();\n  }, [collection, query, orderBy]);\n  return {\n    documents,\n    error\n  };\n};\n_s(useCollection, \"4sqIJUBl6p544zsFTSG2bJoO5tg=\");","map":{"version":3,"names":["useEffect","useState","useRef","projectFirestore","useCollection","collection","_query","_orderBy","_s","documents","setDocuments","error","setError","query","current","orderBy","ref","where","unsubscribe","onSnapshot","snapshot","results","docs","forEach","doc","console","log","push","data","id"],"sources":["/Users/zhaoruzhu/Downloads/StartupSystem/milestone-3/milestone-3-zz795/src/hooks/useCollection.js"],"sourcesContent":["import { useEffect, useState, useRef } from \"react\";\nimport { projectFirestore } from \"../firebase/config\";\n\nexport const useCollection = (collection, _query, _orderBy) => {\n  const [documents, setDocuments] = useState(null);\n  const [error, setError] = useState(null);\n\n  // if we don't use a ref --> infinite loop in useEffect\n  // _query is an array and is \"different\" on every function call\n  const query = useRef(_query).current;\n  const orderBy = useRef(_orderBy).current;\n\n  useEffect(() => {\n    let ref = projectFirestore.collection(collection);\n\n    if (query) {\n      ref = ref.where(...query);\n    }\n    if (orderBy) {\n      ref = ref.orderBy(...orderBy);\n    }\n\n    const unsubscribe = ref.onSnapshot(\n      (snapshot) => {\n        let results = [];\n        snapshot.docs.forEach((doc) => {\n          console.log(doc);\n          results.push({ ...doc.data(), id: doc.id });\n        });\n\n        // update state\n        setDocuments(results);\n        setError(null);\n      },\n      (error) => {\n        console.log(error);\n        setError(\"could not fetch the data\");\n      }\n    );\n\n    // unsubscribe on unmount\n    return () => unsubscribe();\n  }, [collection, query, orderBy]);\n\n  return { documents, error };\n};\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,gBAAgB,QAAQ,oBAAoB;AAErD,OAAO,MAAMC,aAAa,GAAGA,CAACC,UAAU,EAAEC,MAAM,EAAEC,QAAQ,KAAK;EAAAC,EAAA;EAC7D,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACA;EACA,MAAMY,KAAK,GAAGX,MAAM,CAACI,MAAM,CAAC,CAACQ,OAAO;EACpC,MAAMC,OAAO,GAAGb,MAAM,CAACK,QAAQ,CAAC,CAACO,OAAO;EAExCd,SAAS,CAAC,MAAM;IACd,IAAIgB,GAAG,GAAGb,gBAAgB,CAACE,UAAU,CAACA,UAAU,CAAC;IAEjD,IAAIQ,KAAK,EAAE;MACTG,GAAG,GAAGA,GAAG,CAACC,KAAK,CAAC,GAAGJ,KAAK,CAAC;IAC3B;IACA,IAAIE,OAAO,EAAE;MACXC,GAAG,GAAGA,GAAG,CAACD,OAAO,CAAC,GAAGA,OAAO,CAAC;IAC/B;IAEA,MAAMG,WAAW,GAAGF,GAAG,CAACG,UAAU,CAC/BC,QAAQ,IAAK;MACZ,IAAIC,OAAO,GAAG,EAAE;MAChBD,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAEC,GAAG,IAAK;QAC7BC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QAChBH,OAAO,CAACM,IAAI,CAAC;UAAE,GAAGH,GAAG,CAACI,IAAI,CAAC,CAAC;UAAEC,EAAE,EAAEL,GAAG,CAACK;QAAG,CAAC,CAAC;MAC7C,CAAC,CAAC;;MAEF;MACAnB,YAAY,CAACW,OAAO,CAAC;MACrBT,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,EACAD,KAAK,IAAK;MACTc,OAAO,CAACC,GAAG,CAACf,KAAK,CAAC;MAClBC,QAAQ,CAAC,0BAA0B,CAAC;IACtC,CACF,CAAC;;IAED;IACA,OAAO,MAAMM,WAAW,CAAC,CAAC;EAC5B,CAAC,EAAE,CAACb,UAAU,EAAEQ,KAAK,EAAEE,OAAO,CAAC,CAAC;EAEhC,OAAO;IAAEN,SAAS;IAAEE;EAAM,CAAC;AAC7B,CAAC;AAACH,EAAA,CA1CWJ,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module"}